@page "/Account/Register"
@using System.Globalization
@using Microsoft.AspNetCore.Components.Web
@attribute [AllowAnonymous]

<PageTitle>@(IsGerman ? "Registrieren" : "Kayıt")</PageTitle>

<div class="p-4">
    <h1>@(IsGerman ? "Registrieren" : "Kayıt")</h1>
    @if (!string.IsNullOrEmpty(ErrorQuery))
    {
        <p class="text-danger">@ErrorQuery</p>
    }
    <form method="post" action="/api/account/register" class="max-w-400">
        <AntiforgeryToken />
        <div class="mb-3">
            <label class="form-label" for="reg-email">@(IsGerman ? "E-Mail" : "E-posta")</label>
            <input id="reg-email" name="Email" type="email" class="form-control" required />
        </div>
        <div class="mb-3">
            <label class="form-label" for="reg-password">@(IsGerman ? "Passwort" : "Şifre")</label>
            <input id="reg-password" name="Password" type="password" class="form-control" required minlength="6" />
        </div>
        <div class="mb-3">
            <label class="form-label" for="reg-confirm">@(IsGerman ? "Passwort bestätigen" : "Şifre tekrar")</label>
            <input id="reg-confirm" name="ConfirmPassword" type="password" class="form-control" required minlength="6" />
        </div>
        <button type="submit" class="btn btn-primary">@(IsGerman ? "Registrieren" : "Kayıt ol")</button>
    </form>
    <p class="mt-3"><a href="/Account/Login">@(IsGerman ? "Bereits Konto? Anmelden" : "Zaten hesabınız var mı? Giriş")</a></p>
</div>

@code {
    [SupplyParameterFromQuery(Name = "error")]
    public string? ErrorQuery { get; set; }

    private bool IsGerman => CultureInfo.CurrentUICulture.TwoLetterISOLanguageName == "de";
}
