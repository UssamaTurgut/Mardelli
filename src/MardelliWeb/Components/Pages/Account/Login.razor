@page "/Account/Login"
@using System.Globalization
@using Microsoft.AspNetCore.Components.Web
@attribute [AllowAnonymous]

<PageTitle>@(IsGerman ? "Anmelden" : "Giriş")</PageTitle>

<div class="p-4">
    <h1>@(IsGerman ? "Anmelden" : "Giriş")</h1>
    @if (!string.IsNullOrEmpty(ErrorQuery))
    {
        <p class="text-danger">@ErrorQuery</p>
    }
    <form method="post" action="/api/account/login" class="max-w-400">
        <AntiforgeryToken />
        <div class="mb-3">
            <label class="form-label" for="login-email">@(IsGerman ? "E-Mail" : "E-posta")</label>
            <input id="login-email" name="Email" type="email" class="form-control" required />
        </div>
        <div class="mb-3">
            <label class="form-label" for="login-password">@(IsGerman ? "Passwort" : "Şifre")</label>
            <input id="login-password" name="Password" type="password" class="form-control" required />
        </div>
        <div class="mb-3 form-check">
            <input type="checkbox" name="RememberMe" value="true" class="form-check-input" id="remember" />
            <label class="form-check-label" for="remember">@(IsGerman ? "Angemeldet bleiben" : "Beni hatırla")</label>
        </div>
        <button type="submit" class="btn btn-primary">@(IsGerman ? "Anmelden" : "Giriş")</button>
    </form>
    <p class="mt-3"><a href="/Account/Register">@(IsGerman ? "Noch kein Konto? Registrieren" : "Hesabınız yok mu? Kayıt olun")</a></p>
</div>

@code {
    [SupplyParameterFromQuery(Name = "error")]
    public string? ErrorQuery { get; set; }

    private bool IsGerman => CultureInfo.CurrentUICulture.TwoLetterISOLanguageName == "de";
}
